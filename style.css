/* ============================================
   NutriPlan — Premium Stylesheet
   Aesthetic: Soft Luxury Wellness
   Typo: Playfair Display + DM Sans
   ============================================ */

/* === Tokens === */
:root {
  /* Surface */
  --bg:        #f7f5ef;
  --bg-warm:   #faf8f2;
  --surface:   #ffffff;
  --surface-translucent: rgba(255,255,255,.82);

  /* Greens — earthy, not neon */
  --green-50:  #f3f8f1;
  --green-100: #e2eddf;
  --green-200: #c5dbbe;
  --green-300: #9ec295;
  --green-400: #6fa564;
  --green-500: #4a8a3e;
  --green-600: #376e2e;
  --green-700: #2c5724;

  /* Teal accent */
  --teal-50:  #eef9f6;
  --teal-100: #d0f0e8;
  --teal-200: #a3dfd0;
  --teal-400: #3db79a;
  --teal-600: #278a71;

  /* Warm neutrals */
  --sand-50:  #fdfcf7;
  --sand-100: #f5f1e6;
  --sand-200: #e9e2d0;
  --sand-300: #d6cbb3;

  /* Amber */
  --amber-50: #fffcf0;
  --amber-100:#fef4d6;
  --amber-400:#e8a830;

  /* Text */
  --ink:       #1e2b1a;
  --ink-soft:  #3b4a36;
  --ink-muted: #6b7c65;
  --ink-faint: #98a892;

  /* Shadows */
  --sh-xs:   0 1px 2px rgba(30,43,26,.04);
  --sh-sm:   0 2px 8px rgba(30,43,26,.06);
  --sh-md:   0 4px 20px rgba(30,43,26,.07), 0 1.5px 6px rgba(30,43,26,.04);
  --sh-lg:   0 8px 40px rgba(30,43,26,.09), 0 2px 10px rgba(30,43,26,.04);
  --sh-glow-green: 0 4px 24px rgba(74,138,62,.13);
  --sh-glow-teal:  0 4px 24px rgba(61,183,154,.13);

  /* Radius */
  --r-sm:  10px;
  --r-md:  16px;
  --r-lg:  22px;
  --r-xl:  28px;
  --r-pill:9999px;

  /* Motion */
  --ease: cubic-bezier(.22,1,.36,1);
  --ease-back: cubic-bezier(.34,1.56,.64,1);
  --dur: .4s;

  /* Layout */
  --app-max: 460px;
  --px: 22px;
}

/* === Reset === */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px;-webkit-text-size-adjust:100%;scroll-behavior:smooth}
body{
  font-family:'DM Sans',system-ui,sans-serif;
  color:var(--ink);
  background:var(--bg);
  min-height:100dvh;
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
a{text-decoration:none;color:inherit}
button{border:none;background:none;cursor:pointer;font:inherit}
input{font:inherit;border:none;outline:none;background:none}
img{max-width:100%;display:block}

/* === Background Scene === */
.bg-scene{
  position:fixed;inset:0;z-index:0;
  overflow:hidden;
  background:
    linear-gradient(170deg, #f7f5ef 0%, #f3f8f1 35%, #eef9f6 65%, #f7f5ef 100%);
}
.bg-blob{
  position:absolute;
  border-radius:50%;
  filter:blur(80px);
  opacity:.45;
  will-change:transform;
}
.bg-blob--1{
  width:340px;height:340px;
  top:-80px;right:-60px;
  background:radial-gradient(circle,#c5dbbe,transparent 70%);
  animation:blobDrift 18s ease-in-out infinite;
}
.bg-blob--2{
  width:280px;height:280px;
  bottom:10%;left:-60px;
  background:radial-gradient(circle,#d0f0e8,transparent 70%);
  animation:blobDrift 22s ease-in-out infinite reverse;
}
.bg-blob--3{
  width:200px;height:200px;
  top:45%;left:50%;
  background:radial-gradient(circle,#fef4d6,transparent 70%);
  animation:blobDrift 16s ease-in-out infinite 4s;
}
.bg-grain{
  position:absolute;inset:0;
  pointer-events:none;
  opacity:1;
  mix-blend-mode:multiply;
}
@keyframes blobDrift{
  0%,100%{transform:translate(0,0) scale(1)}
  33%{transform:translate(25px,-30px) scale(1.05)}
  66%{transform:translate(-20px,20px) scale(.97)}
}

/* === App Container === */
.app{
  position:relative;z-index:1;
  max-width:var(--app-max);
  margin:0 auto;
  padding:0 var(--px);
  min-height:100dvh;
  display:flex;
  flex-direction:column;
}

/* === Fade-up entrance === */
.fade-up{
  opacity:0;
  transform:translateY(22px);
  animation:fadeUp .65s var(--ease) forwards;
}
@keyframes fadeUp{
  to{opacity:1;transform:translateY(0)}
}

/* === Header === */
.header{
  padding:28px 0 8px;
}
.header__logo{
  display:flex;
  align-items:center;
  gap:14px;
}
.header__icon{
  font-size:2rem;
  line-height:1;
  filter:drop-shadow(0 2px 6px rgba(74,138,62,.18));
}
.header__title{
  font-family:'Playfair Display',Georgia,serif;
  font-weight:700;
  font-size:1.6rem;
  letter-spacing:-.02em;
  color:var(--green-700);
  line-height:1.1;
}
.header__sub{
  font-size:.78rem;
  font-weight:500;
  color:var(--ink-muted);
  margin-top:1px;
  letter-spacing:.01em;
}

/* === Greeting === */
.greeting{
  padding:24px 0 6px;
}
.greeting__text{
  font-family:'Playfair Display',Georgia,serif;
  font-size:1.45rem;
  font-weight:600;
  color:var(--ink);
  line-height:1.25;
}
.greeting__sub{
  font-size:.88rem;
  color:var(--ink-muted);
  margin-top:4px;
  font-weight:400;
}

/* === Search === */
.search{
  position:relative;
  margin:20px 0 28px;
}
.search__inner{
  position:relative;
  display:flex;
  align-items:center;
}
.search__svg{
  position:absolute;
  left:16px;
  width:20px;height:20px;
  color:var(--ink-faint);
  pointer-events:none;
  transition:color .25s var(--ease);
}
.search__input{
  width:100%;
  height:52px;
  padding:0 18px 0 48px;
  border-radius:var(--r-pill);
  background:var(--surface);
  border:1.5px solid var(--sand-200);
  font-size:.92rem;
  font-weight:500;
  color:var(--ink);
  transition:all .3s var(--ease);
  box-shadow:var(--sh-xs);
}
.search__input::placeholder{
  color:var(--ink-faint);
  font-weight:400;
}
.search__input:focus{
  border-color:var(--green-300);
  box-shadow:var(--sh-glow-green);
  background:#fff;
}
.search__input:focus ~ .search__svg,
.search__input:focus + .search__svg{
  /* handled by sibling */ 
}
.search__inner:focus-within .search__svg{
  color:var(--green-500);
}

/* Dropdown */
.search__dropdown{
  position:absolute;
  top:calc(100% + 8px);
  left:0;right:0;
  background:var(--surface);
  border-radius:var(--r-lg);
  box-shadow:var(--sh-lg);
  border:1px solid var(--sand-100);
  max-height:340px;
  overflow-y:auto;
  z-index:100;
  display:none;
  animation:dropIn .22s var(--ease);
}
.search__dropdown.active{display:block}

.search-result-item{
  display:flex;align-items:center;
  gap:14px;
  padding:14px 18px;
  cursor:pointer;
  transition:background .15s;
  border-bottom:1px solid var(--sand-50);
}
.search-result-item:last-child{border-bottom:none}
.search-result-item:active{background:var(--green-50)}

.result-emoji{
  font-size:1.2rem;
  width:38px;height:38px;
  display:flex;align-items:center;justify-content:center;
  background:var(--green-50);
  border-radius:var(--r-sm);
  flex-shrink:0;
}
.result-text{
  font-weight:600;
  font-size:.88rem;
  color:var(--ink);
}
.result-category{
  font-size:.75rem;
  color:var(--ink-muted);
  margin-top:2px;
}
.search-no-result{
  padding:28px 18px;
  text-align:center;
  color:var(--ink-muted);
  font-size:.88rem;
}

@keyframes dropIn{
  from{opacity:0;transform:translateY(-6px)}
  to{opacity:1;transform:translateY(0)}
}

/* === Main Cards === */
.cards{
  display:flex;
  flex-direction:column;
  gap:16px;
  margin-bottom:24px;
}

.card{
  position:relative;
  display:flex;
  align-items:center;
  gap:18px;
  padding:22px 18px;
  border-radius:var(--r-xl);
  background:var(--surface);
  border:1.5px solid var(--sand-100);
  box-shadow:var(--sh-md);
  cursor:pointer;
  transition:all .35s var(--ease);
  overflow:hidden;
}

/* Subtle left accent bar */
.card::before{
  content:'';
  position:absolute;
  left:0;top:16px;bottom:16px;
  width:4px;
  border-radius:0 4px 4px 0;
  transition:opacity .3s;
}
.card--plan::before{background:var(--green-400)}
.card--aliments::before{background:var(--teal-400)}

/* Touch feedback */
.card:active{
  transform:scale(.975);
  box-shadow:var(--sh-sm);
}
@media(hover:hover){
  .card:hover{
    transform:translateY(-3px);
    box-shadow:var(--sh-lg);
    border-color:var(--green-200);
  }
  .card--plan:hover{box-shadow:var(--sh-lg),var(--sh-glow-green)}
  .card--aliments:hover{box-shadow:var(--sh-lg),var(--sh-glow-teal)}
}

/* Emoji container */
.card__emoji-wrap{
  width:56px;height:56px;
  border-radius:var(--r-md);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
  transition:transform .35s var(--ease-back);
}
.card__emoji-wrap--green{background:linear-gradient(145deg,#f3f8f1,#e2eddf)}
.card__emoji-wrap--teal{background:linear-gradient(145deg,#eef9f6,#d0f0e8)}
.card__emoji{
  font-size:1.65rem;
  line-height:1;
}
.card:active .card__emoji-wrap{transform:scale(1.08)}

/* Text */
.card__body{
  flex:1;
  min-width:0;
}
.card__title{
  font-family:'Playfair Display',Georgia,serif;
  font-weight:700;
  font-size:1.1rem;
  color:var(--ink);
  line-height:1.2;
  letter-spacing:-.01em;
}
.card__desc{
  font-size:.8rem;
  color:var(--ink-muted);
  margin-top:3px;
  line-height:1.4;
}

/* Chevron */
.card__chevron{
  width:22px;height:22px;
  color:var(--ink-faint);
  flex-shrink:0;
  transition:transform .3s var(--ease), color .3s;
}
.card:active .card__chevron{transform:translateX(3px);color:var(--green-500)}

/* === Info Pill === */
.info-section{
  display:flex;
  justify-content:center;
  padding:8px 0 0;
}
.info-pill{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:14px 24px;
  border-radius:var(--r-pill);
  background:linear-gradient(135deg,var(--green-600),var(--teal-600));
  color:#fff;
  font-weight:600;
  font-size:.88rem;
  letter-spacing:.01em;
  box-shadow:0 4px 20px rgba(55,110,46,.22);
  cursor:pointer;
  transition:all .35s var(--ease);
  position:relative;
  overflow:hidden;
}
.info-pill::after{
  content:'';
  position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,.14),transparent 60%);
  pointer-events:none;
}
.info-pill:active{transform:scale(.96)}
@media(hover:hover){
  .info-pill:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 30px rgba(55,110,46,.28);
  }
}
.info-pill__badge{
  font-size:1.1rem;
  line-height:1;
}
.info-pill__label{
  position:relative;
  z-index:1;
}
.info-pill__chevron{
  width:18px;height:18px;
  opacity:.7;
  flex-shrink:0;
}

/* === Footer === */
.footer{
  margin-top:auto;
  padding:32px 0 36px;
  text-align:center;
  font-size:.8rem;
  color:var(--ink-faint);
  letter-spacing:.02em;
}
.footer p{display:flex;align-items:center;justify-content:center;gap:4px}

/* === Shared Sub-Page Styles === */

/* Page header with back button */
.page-header{
  display:flex;
  align-items:center;
  gap:14px;
  padding:28px 0 12px;
}
.back-btn{
  width:42px;height:42px;
  border-radius:50%;
  background:var(--surface);
  border:1.5px solid var(--sand-200);
  display:flex;align-items:center;justify-content:center;
  box-shadow:var(--sh-sm);
  transition:all .25s var(--ease);
  flex-shrink:0;
}
.back-btn:active{transform:scale(.9)}
.back-btn svg{width:20px;height:20px;color:var(--ink-soft)}

.page-header__text h1{
  font-family:'Playfair Display',Georgia,serif;
  font-weight:700;
  font-size:1.35rem;
  color:var(--ink);
  line-height:1.2;
}
.page-header__text p{
  font-size:.78rem;
  color:var(--ink-muted);
  margin-top:2px;
}

/* Grid cards (for menu days, sub-pages) */
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
  margin:20px 0 28px;
}

.grid-card{
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:24px 14px;
  border-radius:var(--r-lg);
  background:var(--surface);
  border:1.5px solid var(--sand-100);
  box-shadow:var(--sh-sm);
  cursor:pointer;
  transition:all .3s var(--ease);
  text-align:center;
  min-height:120px;
}
.grid-card:active{transform:scale(.96);box-shadow:var(--sh-xs)}
@media(hover:hover){
  .grid-card:hover{
    transform:translateY(-3px);
    box-shadow:var(--sh-md);
    border-color:var(--green-200);
  }
}
.grid-card__emoji{
  font-size:1.8rem;
  line-height:1;
  transition:transform .3s var(--ease-back);
}
.grid-card:active .grid-card__emoji{transform:scale(1.15)}
.grid-card__label{
  font-family:'Playfair Display',Georgia,serif;
  font-weight:600;
  font-size:.92rem;
  color:var(--ink);
  line-height:1.2;
}
.grid-card__sub{
  font-size:.72rem;
  color:var(--ink-muted);
}

/* Grid card color accents */
.grid-card[data-accent="green"]{border-bottom:3px solid var(--green-300)}
.grid-card[data-accent="teal"]{border-bottom:3px solid var(--teal-200)}
.grid-card[data-accent="amber"]{border-bottom:3px solid var(--amber-100)}
.grid-card[data-accent="sand"]{border-bottom:3px solid var(--sand-200)}

/* Staggered animation for grid cards */
.grid-card.fade-up:nth-child(1){animation-delay:.15s}
.grid-card.fade-up:nth-child(2){animation-delay:.2s}
.grid-card.fade-up:nth-child(3){animation-delay:.25s}
.grid-card.fade-up:nth-child(4){animation-delay:.3s}
.grid-card.fade-up:nth-child(5){animation-delay:.35s}
.grid-card.fade-up:nth-child(6){animation-delay:.4s}
.grid-card.fade-up:nth-child(7){animation-delay:.42s}
.grid-card.fade-up:nth-child(8){animation-delay:.44s}
.grid-card.fade-up:nth-child(9){animation-delay:.46s}
.grid-card.fade-up:nth-child(10){animation-delay:.48s}
.grid-card.fade-up:nth-child(11){animation-delay:.50s}
.grid-card.fade-up:nth-child(12){animation-delay:.52s}
.grid-card.fade-up:nth-child(13){animation-delay:.54s}
.grid-card.fade-up:nth-child(14){animation-delay:.56s}

/* === Accordions (for Menu du jour) === */
.accordion{
  margin:20px 0;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.accordion__section{
  border-radius:var(--r-lg);
  background:var(--surface);
  border:1.5px solid var(--sand-100);
  box-shadow:var(--sh-sm);
  overflow:hidden;
  transition:box-shadow .3s var(--ease);
}
.accordion__section.open{
  box-shadow:var(--sh-md);
  border-color:var(--green-200);
}
.accordion__trigger{
  width:100%;
  display:flex;
  align-items:center;
  gap:14px;
  padding:18px 18px;
  cursor:pointer;
  user-select:none;
  -webkit-user-select:none;
  transition:background .15s;
}
.accordion__trigger:active{background:var(--green-50)}
.accordion__icon{
  font-size:1.4rem;
  width:44px;height:44px;
  display:flex;align-items:center;justify-content:center;
  border-radius:var(--r-md);
  flex-shrink:0;
}
.accordion__icon--breakfast{background:linear-gradient(145deg,#fffcf0,#fef4d6)}
.accordion__icon--lunch{background:linear-gradient(145deg,#f3f8f1,#e2eddf)}
.accordion__icon--dinner{background:linear-gradient(145deg,#f0f0ff,#e0e0f8)}
.accordion__icon--snack{background:linear-gradient(145deg,#fff5f5,#ffe0e0)}
.accordion__title{
  flex:1;
  font-family:'Playfair Display',Georgia,serif;
  font-weight:600;
  font-size:1rem;
  color:var(--ink);
  text-align:left;
}
.accordion__chevron{
  width:20px;height:20px;
  color:var(--ink-faint);
  transition:transform .35s var(--ease);
  flex-shrink:0;
}
.accordion__section.open .accordion__chevron{
  transform:rotate(90deg);
  color:var(--green-500);
}
.accordion__body{
  max-height:0;
  overflow:hidden;
  transition:max-height .45s var(--ease);
}
.accordion__section.open .accordion__body{
  max-height:1200px;
}
.accordion__content{
  padding:0 18px 20px 18px;
}

/* Meal items inside accordion */
.meal-item{
  display:flex;
  align-items:flex-start;
  gap:12px;
  padding:12px 0;
  border-bottom:1px solid var(--sand-50);
}
.meal-item:last-child{border-bottom:none;padding-bottom:0}
.meal-item__icon{
  font-size:1.15rem;
  width:36px;height:36px;
  display:flex;align-items:center;justify-content:center;
  background:var(--sand-50);
  border-radius:var(--r-sm);
  flex-shrink:0;
}
.meal-item__text{flex:1}
.meal-item__name{
  font-weight:600;
  font-size:.86rem;
  color:var(--ink);
}
.meal-item__detail{
  font-size:.78rem;
  color:var(--ink-muted);
  margin-top:2px;
  line-height:1.4;
}

/* === Category Chips (for Aliments page) === */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:16px 0;
}
.chip{
  display:inline-flex;
  align-items:center;
  gap:5px;
  padding:8px 16px;
  border-radius:var(--r-pill);
  background:var(--surface);
  border:1.5px solid var(--sand-200);
  font-size:.82rem;
  font-weight:600;
  color:var(--ink-soft);
  cursor:pointer;
  transition:all .2s var(--ease);
  white-space:nowrap;
}
.chip:active, .chip.active{
  background:var(--green-600);
  color:#fff;
  border-color:var(--green-600);
  box-shadow:var(--sh-glow-green);
}

/* === Aliment list items === */
.aliment-list{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin:16px 0 32px;
}
.aliment-card{
  display:flex;
  align-items:center;
  gap:14px;
  padding:16px;
  border-radius:var(--r-lg);
  background:var(--surface);
  border:1.5px solid var(--sand-100);
  box-shadow:var(--sh-xs);
  transition:all .25s var(--ease);
}
.aliment-card:active{transform:scale(.98)}
.aliment-card__emoji{
  font-size:1.4rem;
  width:44px;height:44px;
  display:flex;align-items:center;justify-content:center;
  border-radius:var(--r-md);
  background:var(--green-50);
  flex-shrink:0;
}
.aliment-card__body{flex:1;min-width:0}
.aliment-card__name{
  font-weight:600;
  font-size:.9rem;
  color:var(--ink);
}
.aliment-card__info{
  font-size:.76rem;
  color:var(--ink-muted);
  margin-top:2px;
}

/* === Shopping List Styles === */
.shopping-section{
  margin:12px 0;
}
.shopping-section__title{
  font-family:'Playfair Display',Georgia,serif;
  font-weight:600;
  font-size:1rem;
  color:var(--ink);
  margin-bottom:10px;
  display:flex;
  align-items:center;
  gap:8px;
}
.shopping-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 0;
  border-bottom:1px solid var(--sand-50);
  font-size:.88rem;
  color:var(--ink-soft);
}
.shopping-item:last-child{border-bottom:none}
.shopping-check{
  width:22px;height:22px;
  border-radius:6px;
  border:2px solid var(--sand-300);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
  transition:all .2s;
  flex-shrink:0;
  background:var(--surface);
}
.shopping-check.checked{
  background:var(--green-500);
  border-color:var(--green-500);
}
.shopping-check.checked::after{
  content:'✓';
  color:#fff;
  font-size:.7rem;
  font-weight:700;
}
.shopping-item.checked-item .shopping-label{
  text-decoration:line-through;
  color:var(--ink-faint);
}

/* === Utilities === */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.mt-sm{margin-top:8px}.mt-md{margin-top:16px}.mt-lg{margin-top:24px}
.mb-md{margin-bottom:16px}.mb-lg{margin-bottom:24px}

/* === Responsive === */
@media(min-width:390px){
  .grid-card{min-height:130px;padding:28px 16px}
  .card{padding:24px 20px}
}
@media(min-width:768px){
  :root{--app-max:520px;--px:28px}
}

/* Safe area */
@supports(padding:env(safe-area-inset-bottom)){
  .app{padding-bottom:env(safe-area-inset-bottom)}
}

/* Scrollbar */
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--sand-200);border-radius:var(--r-pill)}

/* Remove search input default styling */
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration{
  -webkit-appearance:none;
}
